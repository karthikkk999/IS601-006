<table><tr><td> <em>Assignment: </em> IS601 Milestone 3 Shop Project</td></tr>
<tr><td> <em>Student: </em> Sai Karthik Kasumurthy (sk3374)</td></tr>
<tr><td> <em>Generated: </em> 5/5/2023 12:53:03 AM</td></tr>
<tr><td> <em>Grading Link: </em> <a rel="noreferrer noopener" href="https://learn.ethereallab.app/homework/IS601-006-S23/is601-milestone-3-shop-project/grade/sk3374" target="_blank">Grading</a></td></tr></table>
<table><tr><td> <em>Instructions: </em> <ol><li>Checkout Milestone3 branch</li><li>Create a new markdown file called milestone3.md</li><li>git add/commit/push immediate</li><li>Fill in the below deliverables</li><li>At the end copy the markdown and paste it into milestone3.md</li><li>Add/commit/push the changes to Milestone3</li><li>PR Milestone3 to dev and verify</li><li>PR dev to prod and verify</li><li>Checkout dev locally and pull changes to get ready for Milestone 4</li><li>Submit the direct link to this new milestone3.md file from your GitHub prod branch to Canvas</li></ol><p>Note: Ensure all images appear properly on GitHub and everywhere else. Images are only accepted from dev or prod, not localhost. All website links must be from prod (you can assume/infer this by getting your dev URL and changing dev to prod).</p></td></tr></table>
<table><tr><td> <em>Deliverable 1: </em> Orders will be able to be recorded </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add a screenshot of the Orders table with valid data in it</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236366545-e49e7966-ec3b-44ca-9ab7-37b09e5266dc.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the Orders table from the database with valid data in it<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add a screenshot of OrderItems table with validate data in it</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236366606-9e6d602b-76b3-4d82-9d10-67a9231ae713.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of OrderItems table from the database with validate data in it<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 3: </em> Add a screenshot of the purchase form UI from Heroku</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236366967-11714446-0fa7-42bb-b80d-57625a1e48d1.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the purchase form from Heroku with valid data filled in<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 4: </em> Add a screenshot showing the items pending purchase from Heroku</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236368038-91cea0a6-b70b-43de-aa2a-8f1283d52ef4.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing the items pending purchase with specified columns, total purchase price, link<br>back to the cart<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236368406-bc78e0ac-adaf-4b22-b22c-534012c47dc0.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing the percentage change in the price of an item after user<br>adds it to the cart<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 5: </em> Add a screenshot showing the Order Process validations from the code</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236369531-dccfa68f-35c3-4aef-b59f-82ffdc8b78b7.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of code for purchase route showing verify cart (if price update or<br>out of stock) and verify amount (if user enter incorrect amount for purchase)<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236369799-2d271018-7319-48f5-883f-575422fea753.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the code for purchase route showing the creation of order data<br>and inserting it into the database<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236369935-ad77d3b0-5d92-471d-98c0-6e02deb09fd3.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the code of purchase route updating the stock of items after<br>purchase<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236369674-6679c7a3-92e2-467b-b4bb-c3a93a25fc49.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing that payment and address are required fields in the forms.py<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 6: </em> Add a screenshot showing the Order Process validations from the UI (Heroku)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236374060-13e64078-d3d8-4af4-ab9c-b28beffdf8fc.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing the price increase of an item after user adds it to<br>card  <br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236374117-da7231b0-eb1b-4adf-8fa1-c0c693379ac1.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing the price updated, please refresh cart after user tries to purchase<br>an item<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236374249-4e0b0738-2430-4f13-bcc9-2feb2191dbd6.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing unavailable stock message when an out of stock is being purchased<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236375890-23ddf0c9-e720-472f-bc6c-106757e829be.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing insufficient funds (invalid &quot;Money Received&quot; message)<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 7: </em> Briefly describe the code flow/process of the purchase process</td></tr>
<tr><td> <em>Response:</em> <div>We first create a few variables to store the order information, quantity, total<br>price, and cart information.</div><div>With joins on the IS601_S_Cart and IS601_S_Products tables, we use<br>a SELECT to retrieve the user's cart from the database.</div><div>Later, we confirm the<br>cart by determining whether the desired_quantity for each item is in stock and<br>whether the price has remained the same.</div><div>We make sure the user has enough<br>money to make the purchase.</div><div>If every check is successful, a new order with<br>the user-provided order details is created in the IS601_S_Orders table.</div><div>The cart data is<br>then copied into the IS601_S_OrderItems database and linked to the new order to<br>create the order history record.</div><div>The desired_quantity is then subtracted from the stock column<br>of the IS601_S_Products database to update the stock of each item in the<br>cart.</div><div>We empty the user's cart later.</div><div>Commit the changes and show a success message<br>to the user if all database transactions are successful. If not, cancel the<br>transaction and send the user back to their cart while displaying an error<br>notice.</div><div>render the cart and order information in the order_summary.html template.</div><br></td></tr>
<tr><td> <em>Sub-Task 8: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/karthikkk999/IS601-006/pull/22">https://github.com/karthikkk999/IS601-006/pull/22</a> </td></tr>
<tr><td> <em>Sub-Task 9: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://is601-sk3374-prod.herokuapp.com/checkout">https://is601-sk3374-prod.herokuapp.com/checkout</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 2: </em> Order Confirmation Page </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Screenshot showing the order details from the purchase form and the related items that were purchased with a thank you message</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236376592-8e0c40cc-c437-43ed-9c28-f097c61d2a7c.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing the order details from the purchase form and the related items<br>that were purchased with a thank you message<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Briefly explain how this information is retrieved and displayed from a code logic perspective</td></tr>
<tr><td> <em>Response:</em> <p>After a successful purchase is made we commit the database and pass the<br>order data details like order_id, payment_method, total, quantity and so on to the<br>order_summary html using render_template method. Later we display all this retrieved data in<br>the order_summary.html page.&nbsp;<br></p><br></td></tr>
<tr><td> <em>Sub-Task 3: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/karthikkk999/IS601-006/pull/22">https://github.com/karthikkk999/IS601-006/pull/22</a> </td></tr>
<tr><td> <em>Sub-Task 4: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://is601-sk3374-prod.herokuapp.com/purchase">https://is601-sk3374-prod.herokuapp.com/purchase</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 3: </em> User will be able to see their Purchase History </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add a screenshot showing purchase history for a user</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236377079-ad19bb95-94f3-4308-aef3-d1d9dfca9314.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing purchase history for a user<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add a screenshot showing full details of a purchase (Order Details Page)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236377112-818fdb46-542e-4ed6-a6e0-a56aae3804ae.png"/></td></tr>
<tr><td> <em>Caption:</em> <p> screenshot showing full details of a purchase (Order Details Page)<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 3: </em> Briefly explain the logic for showing the purchase list and click/displaying the Order Details</td></tr>
<tr><td> <em>Response:</em> <p>Shop/orders route handles the purchase list. Here we fetch the the orders made<br>by the user using a SELECT query on&nbsp;&nbsp;IS601_S_Orders o, IS601_Users using the user_id<br>and display it to the screen by calling the orders.html and passing the<br>fetched records as render arguements.<div><br></div><div>In Orders.html we have a link to the order<br>page which shows the details for a specific order which is selected. Shop/order<br>route handles this. Here we again use a SELECT query on&nbsp;IS601_S_OrderItems to fetch<br>the order details and then pass them to order.html to display on the<br>screen.&nbsp;&nbsp;</div><br></p><br></td></tr>
<tr><td> <em>Sub-Task 4: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/karthikkk999/IS601-006/pull/22">https://github.com/karthikkk999/IS601-006/pull/22</a> </td></tr>
<tr><td> <em>Sub-Task 5: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://is601-sk3374-prod.herokuapp.com/order?id=1">https://is601-sk3374-prod.herokuapp.com/order?id=1</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 4: </em> Store Owner Purchase History </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add a screenshot showing purchase history from multiple users</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236377891-7cb2693d-b443-4bef-abc0-9be037c75d3a.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot showing purchase history from multiple users for admin<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add a screenshot showing full details of a purchase (Order Details Page)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236377940-f506ef8d-f9a3-4b3f-89d9-5e94e748ff1c.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>screenshot showing full details of a purchase (Order Details Page) for a non-admin<br>user - Karthik<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 3: </em> Briefly explain the logic for showing the purchase list and click/displaying the Order Details (mostly how it differs from the user's purchase history feature)</td></tr>
<tr><td> <em>Response:</em> <div>We use the route "shop/orders" for handling the purchase list. Here we check<br>if the current user has the "Admin" role using the "current_user.has_role" function. If<br>the user is an admin, the function retrieves all the orders using a<br>SELECT query on IS601_S_Orders table.&nbsp;&nbsp;</div><div><br></div><div>But if the user is not an admin, we<br>use the same SELECT query to get the records but with an additional<br>condition in the SQL query to filter only the orders belonging to the<br>current user. This ensures that the user can only view their own orders.</div><div><br></div><div>The<br>same with the "shop/order" route which handles the Order Details.</div><div>If the current user<br>is an admin we get the products in the order using a SELECT<br>query on the tables IS601_S_OrderItems oi, IS601_S_Products,&nbsp;IS601_S_Orders.</div><div>Whereas if the current user is not<br>an admin&nbsp; we use the same SELECT query but with a filter on<br>the current user so user can only view their own orders&nbsp;</div><br></td></tr>
<tr><td> <em>Sub-Task 4: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/karthikkk999/IS601-006/pull/22">https://github.com/karthikkk999/IS601-006/pull/22</a> </td></tr>
<tr><td> <em>Sub-Task 5: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://is601-sk3374-prod.herokuapp.com/order?id=6">https://is601-sk3374-prod.herokuapp.com/order?id=6</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 5: </em> Misc </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add screenshot of the Cart page showing the button to place an order</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/123420633/236379353-7e6dcd8c-3cbd-46a7-9299-52c26277cb23.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the Cart page showing the button to place an order<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Describe any issues and learnings throughout this milestone</td></tr>
<tr><td> <em>Response:</em> <div>Issues:</div>I had an issue with the database. I had changed the names of<br>the tables and later forgot to change it in the py files. After<br>debugging got to know the issue. Later when I changed them back the<br>application worked fine.&nbsp;<div><br></div><div>Learnings:</div><div>I learned about creating different roles and how to show/hide certain<br>features of the application based on the current user role.</div><div>Also learned about keeping<br>a track of transactions when working on an application that revolves around money<br>transfers or payments.&nbsp;<br><div><br></div></div><br></td></tr>
</table></td></tr>
<table><tr><td><em>Grading Link: </em><a rel="noreferrer noopener" href="https://learn.ethereallab.app/homework/IS601-006-S23/is601-milestone-3-shop-project/grade/sk3374" target="_blank">Grading</a></td></tr></table>